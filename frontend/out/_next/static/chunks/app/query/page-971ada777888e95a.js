(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[777],{1400:(e,t,a)=>{"use strict";a.d(t,{P:()=>p});var r=a(5155),s=a(2115),l=a(6874),d=a.n(l),o=a(5695),n=a(4213),i=a(7924),c=a(2713),m=a(3311),x=a(3052),h=a(2355),u=a(2098),b=a(3509);function g(e){let{className:t=""}=e,[a,l]=(0,s.useState)(!1),[g,p]=(0,s.useState)("light"),f=(0,o.usePathname)();(0,s.useEffect)(()=>{console.log("Sidebar useEffect running...");let e=localStorage.getItem("theme");console.log("Saved theme from localStorage:",e),e?(p(e),document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(e),console.log("Applied theme to HTML element:",e)):(document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add("light"),console.log("Applied default light theme to HTML element"));let t=localStorage.getItem("sidebar-collapsed");console.log("Saved sidebar state from localStorage:",t),null!==t&&l(JSON.parse(t))},[]);let j=[{href:"/connect",icon:n.A,label:"Connect",description:"Manage connections"},{href:"/query",icon:i.A,label:"Query",description:"Natural language queries"},{href:"/visualize",icon:c.A,label:"Visualize",description:"Data visualization"}];return(0,r.jsxs)("div",{className:"relative bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 border-r border-slate-700/50 transition-all duration-500 ease-out ".concat(a?"w-20":"w-72"," ").concat(t),children:[(0,r.jsx)("div",{className:"p-4 border-b border-slate-700/30",children:(0,r.jsxs)("div",{className:"flex items-center ".concat(a?"justify-center":"justify-between"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600",children:(0,r.jsx)(m.A,{className:"w-5 h-5 text-white"})}),!a&&(0,r.jsx)("h1",{className:"text-xl font-bold text-white",children:"Aurora"})]}),(0,r.jsx)("button",{onClick:()=>{console.log("toggleCollapse called, current state:",a);let e=!a;l(e),localStorage.setItem("sidebar-collapsed",JSON.stringify(e)),console.log("Sidebar collapsed state updated to:",e)},className:"p-2 rounded-lg hover:bg-slate-700/50 transition-colors duration-200",children:a?(0,r.jsx)(x.A,{className:"w-4 h-4 text-white"}):(0,r.jsx)(h.A,{className:"w-4 h-4 text-white"})})]})}),(0,r.jsx)("nav",{className:"p-4 space-y-2",children:j.map(e=>{let t=e.icon,s=f===e.href;return(0,r.jsxs)(d(),{href:e.href,className:"group flex items-center p-3 rounded-xl transition-all duration-300 ".concat(s?"bg-blue-600/20 border border-blue-500/30 text-blue-400":"text-slate-300 hover:bg-slate-700/50 hover:text-white border border-transparent"," ").concat(a?"justify-center":"justify-start"),children:[(0,r.jsx)("div",{className:"p-2 rounded-lg ".concat(s?"bg-blue-600/20 text-blue-400":"bg-slate-700/50 text-slate-400 group-hover:bg-slate-600/50 group-hover:text-white"," transition-all duration-200"),children:(0,r.jsx)(t,{className:"w-4 h-4"})}),!a&&(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("div",{className:"font-medium",children:e.label}),(0,r.jsx)("div",{className:"text-xs text-slate-400",children:e.description})]})]},e.href)})}),(0,r.jsx)("div",{className:"p-4 border-t border-slate-700/30",children:(0,r.jsxs)("button",{onClick:()=>{console.log("toggleTheme called, current theme:",g);let e="dark"===g?"light":"dark";p(e),document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(e),localStorage.setItem("theme",e),console.log("Theme updated to:",e,"and applied to HTML element")},className:"flex items-center justify-center w-full p-3 rounded-xl transition-all duration-300 ".concat(a?"justify-center":"justify-between"," bg-slate-800/50 hover:bg-slate-700/50 border border-slate-600/30 hover:border-slate-500/50 hover:scale-105"),children:[(0,r.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-br from-amber-500 to-orange-600 text-white",children:"dark"===g?(0,r.jsx)(u.A,{className:"w-4 h-4"}):(0,r.jsx)(b.A,{className:"w-4 h-4"})}),!a&&(0,r.jsx)("span",{className:"text-slate-300 font-medium",children:"dark"===g?"Light Mode":"Dark Mode"})]})})]})}function p(e){let{children:t}=e,[a,l]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{l(!0)},[]),a)?(0,r.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-100/50 dark:from-gray-950 dark:via-slate-900/50 dark:to-gray-900",children:[(0,r.jsx)(g,{}),(0,r.jsxs)("main",{className:"flex-1 overflow-auto relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_1px_1px,rgba(59,130,246,0.1)_1px,transparent_0)] bg-[size:20px_20px] dark:bg-[radial-gradient(circle_at_1px_1px,rgba(59,130,246,0.05)_1px,transparent_0)]"}),(0,r.jsx)("div",{className:"relative z-10 p-8",children:t})]})]}):(0,r.jsxs)("div",{className:"flex h-screen bg-slate-50",children:[(0,r.jsx)(g,{}),(0,r.jsx)("main",{className:"flex-1 overflow-auto relative",children:(0,r.jsx)("div",{className:"relative z-10 p-8",children:t})})]})}},3940:(e,t,a)=>{Promise.resolve().then(a.bind(a,4214))},4214:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var r=a(5155),s=a(2115),l=a(1400),d=a(4213),o=a(7565);let n=(0,o.A)("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);var i=a(3052);function c(e){let{execution:t,maxHeight:a="max-h-96"}=e;if(!t.success||!t.data||0===t.data.length)return(0,r.jsxs)("div",{className:"p-8 text-center bg-slate-50/60 dark:bg-slate-800/60 rounded-2xl border border-slate-200/50 dark:border-slate-700/50",children:[(0,r.jsx)(d.A,{className:"w-12 h-12 mx-auto mb-4 text-slate-400"}),(0,r.jsx)("p",{className:"text-slate-600 dark:text-slate-400",children:"No data returned"})]});let{columns:s,data:l}=t;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)(n,{className:"w-4 h-4 text-white"})}),(0,r.jsxs)("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:["Query Results (",l.length," rows)"]})]}),(0,r.jsxs)("div",{className:"overflow-hidden bg-white/60 dark:bg-gray-800/60 rounded-2xl border border-slate-200/50 dark:border-slate-700/50",children:[(0,r.jsx)("div",{className:"overflow-x-auto ".concat(a," overflow-y-auto"),children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{className:"bg-slate-100/80 dark:bg-slate-700/80 border-b border-slate-200/50 dark:border-slate-600/50",children:s.map((e,t)=>(0,r.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900 dark:text-slate-100 whitespace-nowrap sticky top-0 bg-slate-100/90 dark:bg-slate-700/90 backdrop-blur-sm z-10",children:e},t))})}),(0,r.jsx)("tbody",{className:"divide-y divide-slate-200/50 dark:divide-slate-600/50",children:l.map((e,t)=>(0,r.jsx)("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-700/40 transition-colors duration-150",children:e.map((e,t)=>(0,r.jsx)("td",{className:"px-6 py-4 text-sm text-slate-700 dark:text-slate-300 whitespace-nowrap",children:"N/A"===e?(0,r.jsx)("span",{className:"text-slate-400 dark:text-slate-500 italic",children:"N/A"}):(0,r.jsx)("span",{className:"break-words",children:e})},t))},t))})]})}),s.length>6&&(0,r.jsx)("div",{className:"px-6 py-3 bg-slate-50/60 dark:bg-slate-800/60 border-t border-slate-200/50 dark:border-slate-700/50 flex items-center justify-between text-sm text-slate-600 dark:text-slate-400",children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("span",{children:"Scroll horizontally to see more columns"}),(0,r.jsx)(i.A,{className:"w-4 h-4"})]})})]})]})}var m=a(7924);let x=(0,o.A)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),h=(0,o.A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var u=a(3311),b=a(9509);let g=e=>e.replace(/'/g,"''"),p=e=>{if(null==e)return"NULL";if(Array.isArray(e))return"("+e.map(e=>p(e)).join(", ")+")";if(e instanceof Date)return"'".concat(e.toISOString().slice(0,19).replace("T"," "),"'");switch(typeof e){case"string":return"'".concat(g(e),"'");case"number":return Number.isFinite(e)?String(e):"NULL";case"boolean":return e?"1":"0";default:return"'".concat(g(String(e)),"'")}};function f(){var e,t;let[a,d]=(0,s.useState)(""),[o,n]=(0,s.useState)(!1),[i,g]=(0,s.useState)(null),[f,j]=(0,s.useState)(null),N=async e=>{e.preventDefault(),n(!0),g(null),j(null);try{var t;let e=null!=(t=b.env.NEXT_PUBLIC_API_BASE_URL)?t:"",r=await fetch(e?"".concat(e,"/api/smart-query"):"/api/smart-query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a})});if(!r.ok){let e=await r.json();throw Error(e.detail.user_message||"Request failed with ".concat(r.status))}let s=await r.json();j(s)}catch(e){g(e instanceof Error?e.message:"Request failed")}finally{n(!1)}},v=e=>{d(e.replace(/[""]/g,""));let t=document.getElementById("query-form");t&&t.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{let e=document.getElementById("query");e&&e.focus()},500)},k=(e=null==f?void 0:f.sql,t=null==f?void 0:f.parameters,e?t?e.replace(/\{(\w+)(?::[^}]+)?\}/g,(e,a)=>Object.prototype.hasOwnProperty.call(t,a)?p(t[a]):e):e:"");return(0,r.jsx)(l.P,{children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8",children:[(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-emerald-600 to-teal-600 rounded-2xl mb-4",children:(0,r.jsx)(m.A,{className:"w-8 h-8 text-white"})}),(0,r.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-slate-900 via-emerald-800 to-teal-800 bg-clip-text text-transparent dark:from-white dark:via-emerald-200 dark:to-teal-200",children:"Query"}),(0,r.jsx)("p",{className:"text-xl text-slate-600 dark:text-slate-300 max-w-2xl mx-auto",children:"Ask questions about your data using natural language and AI-powered insights"})]}),(0,r.jsxs)("div",{id:"query-form",className:"bg-white/70 dark:bg-gray-900/70 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 dark:border-gray-800/20 p-8",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-8",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center",children:(0,r.jsx)(x,{className:"w-5 h-5 text-white"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Natural Language Query"})]}),(0,r.jsxs)("form",{onSubmit:N,className:"space-y-8",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("label",{htmlFor:"query",className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Natural language query"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(m.A,{className:"absolute left-4 top-4 w-5 h-5 text-emerald-500"}),(0,r.jsx)("textarea",{id:"query",value:a,onChange:e=>d(e.target.value),rows:6,className:"w-full pl-12 pr-4 py-4 bg-white/50 dark:bg-gray-800/50 border border-slate-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500/50 transition-all duration-200 backdrop-blur-sm resize-none text-slate-900 dark:text-white placeholder-slate-500 dark:placeholder-slate-400",placeholder:"e.g., Show me all users who signed up in the last 30 days and their engagement metrics...",required:!0})]})]}),(0,r.jsxs)("button",{type:"submit",className:"flex items-center px-8 py-4  bg-gradient-to-r from-emerald-600 to-teal-600  enabled:hover:from-emerald-700 enabled:hover:to-teal-700  text-white font-semibold rounded-xl  transition-all duration-200  enabled:hover:scale-105 shadow-lg  shadow-emerald-500/25 focus:ring-2  focus:ring-emerald-500/50 focus:ring-offset-2  dark:focus:ring-offset-gray-900  disabled:opacity-60 disabled:cursor-not-allowed",disabled:o,children:[(0,r.jsx)(h,{className:"w-5 h-5 mr-2"}),o?"Submitting...":"Submit Query"]})]})]}),i&&(0,r.jsxs)("div",{className:"mt-6 p-4 rounded-xl border border-red-200/50 dark:border-red-800/50 bg-red-50/60 dark:bg-red-900/20 text-red-800 dark:text-red-200",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Error"}),(0,r.jsx)("p",{children:i})]}),f&&(0,r.jsxs)("div",{className:"mt-6 p-4 rounded-xl border border-emerald-200/50 dark:border-emerald-800/50 bg-emerald-50/60 dark:bg-emerald-900/20",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2 text-emerald-900 dark:text-emerald-100",children:"Generated SQL"}),(0,r.jsx)("div",{className:"bg-slate-50/60 dark:bg-slate-800/60 rounded-xl p-4 border border-slate-200/50 dark:border-slate-700/50",children:(0,r.jsx)("code",{className:"text-sm text-slate-800 dark:text-slate-200 break-all",children:k||"No SQL generated"})}),f.execution&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h4",{className:"font-semibold mt-4 mb-2 text-emerald-900 dark:text-emerald-100",children:"Execution Result"}),(0,r.jsx)("div",{className:"bg-white/70 dark:bg-gray-900/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-800/20 p-6",children:(0,r.jsx)(c,{execution:f.execution})})]})]}),(0,r.jsxs)("div",{className:"bg-white/70 dark:bg-gray-900/70 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 dark:border-gray-800/20 p-8",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-8",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center",children:(0,r.jsx)(u.A,{className:"w-5 h-5 text-white"})}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Example Queries"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"group p-6 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-2xl border border-blue-200/50 dark:border-blue-700/30 hover:scale-105 transition-all duration-300 cursor-pointer",onClick:()=>v("What are the top 10 products by sales volume this month?"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)(m.A,{className:"w-4 h-4 text-white"})}),(0,r.jsx)("h4",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"Sales Analytics"})]}),(0,r.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300 leading-relaxed",children:"“What are the top 10 products by sales volume this month?”"})]}),(0,r.jsxs)("div",{className:"group p-6 bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-2xl border border-emerald-200/50 dark:border-emerald-700/30 hover:scale-105 transition-all duration-300 cursor-pointer",onClick:()=>v("Show me user engagement metrics for the last quarter"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)(m.A,{className:"w-4 h-4 text-white"})}),(0,r.jsx)("h4",{className:"font-semibold text-emerald-900 dark:text-emerald-100",children:"User Engagement"})]}),(0,r.jsx)("p",{className:"text-sm text-emerald-700 dark:text-emerald-300 leading-relaxed",children:"“Show me user engagement metrics for the last quarter”"})]}),(0,r.jsxs)("div",{className:"group p-6 bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-2xl border border-orange-200/50 dark:border-orange-700/30 hover:scale-105 transition-all duration-300 cursor-pointer",onClick:()=>v("Find all transactions above $1000 from yesterday"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)(m.A,{className:"w-4 h-4 text-white"})}),(0,r.jsx)("h4",{className:"font-semibold text-orange-900 dark:text-orange-100",children:"Transaction Analysis"})]}),(0,r.jsx)("p",{className:"text-sm text-orange-700 dark:text-orange-300 leading-relaxed",children:"“Find all transactions above $1000 from yesterday”"})]}),(0,r.jsxs)("div",{className:"group p-6 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-2xl border border-purple-200/50 dark:border-purple-700/30 hover:scale-105 transition-all duration-300 cursor-pointer",onClick:()=>v("Compare revenue growth between Q1 and Q2 this year"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)(m.A,{className:"w-4 h-4 text-white"})}),(0,r.jsx)("h4",{className:"font-semibold text-purple-900 dark:text-purple-100",children:"Growth Comparison"})]}),(0,r.jsx)("p",{className:"text-sm text-purple-700 dark:text-purple-300 leading-relaxed",children:"“Compare revenue growth between Q1 and Q2 this year”"})]})]})]})]})})}}},e=>{e.O(0,[558,441,964,358],()=>e(e.s=3940)),_N_E=e.O()}]);